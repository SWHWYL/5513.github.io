<!doctype html>
<html lang="zh-CN">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>家常菜谱 - 快速做法大全</title>
  <meta name="description" content="简洁易懂的家常菜做法集合：番茄炒蛋、宫保鸡丁、麻婆豆腐、扬州炒饭、红烧肉等，每道菜包含所需食材、步骤与小贴士。可离线保存与打印。">
  <meta name="author" content="Recipe Generator">
  <style>
    :root{
      --bg:#0f1724; --card:#0b1220; --muted:#9aa4b2; --accent:#f97316; --glass: rgba(255,255,255,0.03);
      --maxw:1100px; --radius:12px; --gap:18px; font-family: Inter, ui-sans-serif, system-ui, -apple-system, "Helvetica Neue", Arial;
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{margin:0;background:linear-gradient(180deg,#071026 0%, #071a2a 100%);color:#e6eef6;display:flex;align-items:flex-start;justify-content:center;padding:32px}
    .wrap{width:100%;max-width:var(--maxw);}
    header{display:flex;align-items:center;gap:14px;margin-bottom:18px}
    .logo{background:linear-gradient(90deg,var(--accent),#ffb86b);width:56px;height:56px;border-radius:10px;display:flex;align-items:center;justify-content:center;color:#081020;font-weight:700}
    h1{font-size:20px;margin:0}
    p.lead{margin:0;color:var(--muted);font-size:13px}

    .controls{display:flex;gap:12px;align-items:center;margin:18px 0}
    input.search{flex:1;padding:10px 12px;border-radius:10px;border:1px solid rgba(255,255,255,0.05);background:var(--glass);color:inherit}
    select{padding:10px;border-radius:10px;background:transparent;border:1px solid rgba(255,255,255,0.05);color:inherit}
    button.primary{background:linear-gradient(90deg,var(--accent),#ffb86b);border:none;padding:10px 14px;border-radius:10px;color:#081020;font-weight:600}

    .grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(260px,1fr));gap:var(--gap)}
    .card{background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));border-radius:var(--radius);padding:14px;border:1px solid rgba(255,255,255,0.03);box-shadow:0 6px 18px rgba(2,6,23,0.6);}
    .card h3{margin:0 0 8px 0;font-size:16px}
    .meta{color:var(--muted);font-size:13px;margin-bottom:8px}
    .tags{display:flex;gap:8px;flex-wrap:wrap}
    .tag{background:rgba(255,255,255,0.03);padding:6px 8px;border-radius:8px;font-size:12px;color:var(--muted)}
    .btn-row{display:flex;gap:8px;margin-top:10px}
    .btn{padding:8px 10px;border-radius:8px;border:1px solid rgba(255,255,255,0.04);background:transparent;color:inherit;cursor:pointer}

    footer{margin-top:22px;color:var(--muted);font-size:13px;text-align:center}

    /* modal */
    .modal-backdrop{position:fixed;inset:0;background:rgba(2,6,23,0.6);display:none;align-items:center;justify-content:center;padding:20px}
    .modal{width:100%;max-width:900px;background:linear-gradient(180deg,#071028, #05101a);border-radius:14px;padding:20px;border:1px solid rgba(255,255,255,0.04);box-shadow:0 18px 50px rgba(1,6,12,0.8)}
    .modal .close{float:right;background:transparent;border:0;color:var(--muted);font-size:18px;cursor:pointer}
    .ingredients, .steps{margin-top:12px}
    .ing-list{display:grid;grid-template-columns:repeat(auto-fit,minmax(180px,1fr));gap:10px}
    .ing-item{background:rgba(255,255,255,0.02);padding:8px;border-radius:8px}
    .step{margin-bottom:10px;padding:10px;background:rgba(255,255,255,0.01);border-radius:8px}

    /* print-friendly */
    @media print{
      body{background:white;color:black}
      header, .controls, footer{display:none}
      .modal-backdrop{display:block!important;background:transparent}
      .card{page-break-inside:avoid}
    }

    /* small screen tweaks */
    @media (max-width:420px){:root{--gap:12px} header{flex-direction:column;align-items:flex-start} .logo{width:48px;height:48px}}
  </style>
</head>
<body>
  <div class="wrap">
    <header>
      <div class="logo">菜谱</div>
      <div>
        <h1>家常菜做法速查</h1>
        <p class="lead">清晰步骤、易懂配料、可打印 — 适合新手与忙碌的你。</p>
      </div>
    </header>

    <div class="controls">
      <input id="q" class="search" placeholder="搜索菜名 / 食材 / 风味（例如：番茄、辣、家常）">
      <select id="filter">
        <option value="all">全部风味</option>
        <option value="veg">素菜</option>
        <option value="meat">荤菜</option>
        <option value="spicy">微辣/辣</option>
      </select>
      <button class="primary" id="btnRandom">随机一菜</button>
    </div>

    <main>
      <section class="grid" id="cards"></section>
    </main>

    <footer>© 家常菜谱 · 可保存此页面或部署到任意静态站点（GitHub Pages / Vercel / Netlify）</footer>
  </div>

  <!-- modal for recipe detail -->
  <div id="modalBackdrop" class="modal-backdrop" role="dialog" aria-hidden="true">
    <div class="modal" role="document">
      <button class="close" id="closeModal">✕</button>
      <h2 id="modalTitle">菜名</h2>
      <div class="meta" id="modalMeta">时长 · 难度 · 份量</div>
      <div class="ingredients">
        <h4>所需食材</h4>
        <div class="ing-list" id="modalIngredients"></div>
      </div>
      <div class="steps">
        <h4>步骤</h4>
        <div id="modalSteps"></div>
      </div>
      <div style="margin-top:12px;display:flex;gap:8px;">
        <button class="btn" id="btnPrint">打印 / 保存为 PDF</button>
        <button class="btn" id="btnClose2">关闭</button>
      </div>
    </div>
  </div>

  <script>
    // ===== 数据：常用菜示例 =====
    const RECIPES = [
      {
        id: 'tomato-egg', title: '番茄炒蛋', time: '15 分钟', difficulty: '简单', serves: '2 人', tags: ['veg','家常'],
        ingredients: [
          '番茄 2 个（中等）', '鸡蛋 3 个', '盐 1/2 茶匙', '糖 1/2 茶匙（提味）', '葱 1 根（可选）', '食用油 适量'
        ],
        steps: [
          '鸡蛋加少许盐打散，热锅加油，倒入鸡蛋炒至七成熟盛出。',
          '番茄切块，锅中留底油，放入番茄翻炒至出汁，加少许糖与盐调味。',
          '把鸡蛋倒回锅和番茄快速翻匀，试味后根据需要补盐，撒葱花即可出锅。'
        ],
        tips: '番茄炒出汁后火别太小，避免出水过多；先炒鸡蛋再回锅可保持鸡蛋松软。'
      },
      {
        id: 'kung-pao', title: '宫保鸡丁', time: '30 分钟', difficulty: '中等', serves: '3 人', tags: ['meat','spicy','川菜'],
        ingredients: [
          '鸡胸肉 300g', '花生 50g', '干辣椒 8-12 个', '花椒 少许', '蒜 2 瓣', '生抽 1 大勺', '老抽 1/2 小勺', '醋 1 大勺', '白糖 1 小勺', '淀粉 1 大勺'
        ],
        steps: [
          '鸡胸切丁，加少许盐、淀粉和油抓匀腌 10 分钟。',
          '热锅多油，下花生炸香捞出备用（或用熟花生）。',
          '炒香干辣椒与花椒，加入鸡丁快速翻炒至变色。',
          '加入调好的酱汁（生抽/老抽/醋/糖/少量水淀粉），收汁后放花生翻匀出锅。'
        ],
        tips: '火候快，动作要快，花生最后入锅保持脆感；可根据口味调整辣度与甜醋比例。'
      },
      {
        id: 'mapo-tofu', title: '麻婆豆腐', time: '25 分钟', difficulty: '中等', serves: '2-3 人', tags: ['veg','spicy','川菜'],
        ingredients: [
          '嫩豆腐 300g', '猪肉末 100g（可用牛肉）', '郫县豆瓣酱 1 大勺', '蒜末 1 大勺', '姜末 1 小勺', '葱花', '花椒粉', '生抽 1 小勺', '淀粉水 适量'
        ],
        steps: [
          '豆腐切块用开水焯一下捞出控水。',
          '锅中放油，下肉末煸炒至微黄，加入豆瓣酱炒出红油。',
          '加入蒜姜末爆香，倒入适量高汤或清水，放入豆腐小火煮 5 分钟。',
          '用淀粉水勾薄欠，撒上花椒粉和葱花，淋少许热油激香即可。'
        ],
        tips: '豆腐焯水能保持形状；花椒和豆瓣酱是麻婆味道的关键，按口味调整用量。'
      },
      {
        id: 'fried-rice', title: '扬州炒饭（蛋炒饭）', time: '20 分钟', difficulty: '简单', serves: '2 人', tags: ['meat','家常'],
        ingredients: [
          '隔夜米饭 2 碗', '鸡蛋 2 个', '火腿/叉烧/虾仁 100g', '青豆/胡萝卜丁 适量', '葱花', '盐 与 白胡椒 适量', '油 适量'
        ],
        steps: [
          '热锅加油，先把鸡蛋炒散盛出。',
          '锅热后加油，下火腿丁与蔬菜快炒，再加入米饭翻散。',
          '加入鸡蛋和葱花，调盐与白胡椒，炒匀即可出锅。'
        ],
        tips: '米饭最好干爽（隔夜饭最佳）；锅要热、油要多，炒散不粘锅。'
      },
      {
        id: 'braised-pork', title: '红烧肉（家常版）', time: '90 分钟', difficulty: '较难', serves: '3-4 人', tags: ['meat','家常'],
        ingredients: [
          '五花肉 500g', '冰糖 20g', '老抽 1 大勺', '生抽 1 大勺', '料酒 1 大勺', '生姜 几片', '八角 1-2 个', '葱一段'
        ],
        steps: [
          '五花肉切块，冷水入锅焯去血水，捞出控干。',
          '锅中放少许油，煎糖色（或用冰糖融化），放入五花肉翻炒上色。',
          '加入料酒、生抽、老抽和足量热水，放姜葱八角，小火炖 60-80 分钟至软烂收汁。'
        ],
        tips: '控制糖色火候很重要，炖煮时间根据肉块大小调整；收汁时火可开大让汤汁黏稠包裹肉块。'
      }
    ];

    // ===== UI 构建 =====
    const cardsEl = document.getElementById('cards');
    function renderCards(list){
      cardsEl.innerHTML = '';
      list.forEach(r => {
        const card = document.createElement('article');
        card.className = 'card';
        card.innerHTML = `
          <h3>${r.title}</h3>
          <div class="meta">${r.time} · ${r.difficulty} · ${r.serves}</div>
          <div class="tags">${r.tags.map(t=>`<div class="tag">${t}</div>`).join('')}</div>
          <div class="btn-row">
            <button class="btn" data-id="${r.id}" aria-label="查看 ${r.title}">查看做法</button>
            <button class="btn" data-id="${r.id}" data-print>打印</button>
          </div>
        `;
        cardsEl.appendChild(card);
      });
    }

    function findById(id){return RECIPES.find(x=>x.id===id)}

    function openModal(recipe){
      const mb = document.getElementById('modalBackdrop');
      document.getElementById('modalTitle').textContent = recipe.title;
      document.getElementById('modalMeta').textContent = `${recipe.time} · ${recipe.difficulty} · ${recipe.serves}`;
      const ing = document.getElementById('modalIngredients'); ing.innerHTML='';
      recipe.ingredients.forEach(it=>{const d=document.createElement('div');d.className='ing-item';d.textContent=it;ing.appendChild(d)});
      const steps = document.getElementById('modalSteps'); steps.innerHTML='';
      recipe.steps.forEach((s,i)=>{const d=document.createElement('div');d.className='step';d.innerHTML=`<strong>步骤 ${i+1}：</strong>${s}`;steps.appendChild(d)});
      mb.style.display='flex'; mb.setAttribute('aria-hidden','false');
    }

    function closeModal(){const mb=document.getElementById('modalBackdrop'); mb.style.display='none'; mb.setAttribute('aria-hidden','true')}

    // initial render
    renderCards(RECIPES);

    // event delegation for card buttons
    cardsEl.addEventListener('click', (e)=>{
      const btn = e.target.closest('button'); if(!btn) return;
      const id = btn.dataset.id; if(!id) return;
      const r = findById(id); if(!r) return;
      if(btn.hasAttribute('data-print')){ // print single recipe
        openModal(r);
        setTimeout(()=>window.print(),100);
      } else {
        openModal(r);
      }
    });

    document.getElementById('closeModal').addEventListener('click', closeModal);
    document.getElementById('btnClose2').addEventListener('click', closeModal);
    document.getElementById('btnPrint').addEventListener('click', ()=>{window.print()});

    // search & filter
    document.getElementById('q').addEventListener('input', ()=>{
      applyFilters();
    });
    document.getElementById('filter').addEventListener('change', ()=>{applyFilters()});

    function applyFilters(){
      const q = document.getElementById('q').value.trim().toLowerCase();
      const f = document.getElementById('filter').value;
      let filtered = RECIPES.filter(r => {
        const text = (r.title + ' ' + r.ingredients.join(' ') + ' ' + r.tags.join(' ')).toLowerCase();
        if(q && !text.includes(q)) return false;
        if(f==='all') return true;
        if(f==='veg') return r.tags.includes('veg');
        if(f==='meat') return r.tags.includes('meat');
        if(f==='spicy') return r.tags.includes('spicy');
        return true;
      });
      renderCards(filtered);
    }

    // random button
    document.getElementById('btnRandom').addEventListener('click', ()=>{
      const idx = Math.floor(Math.random()*RECIPES.length); openModal(RECIPES[idx]);
    });

    // keyboard: Esc close
    document.addEventListener('keydown', (e)=>{ if(e.key==='Escape') closeModal() });
  </script>
</body>
</html>
